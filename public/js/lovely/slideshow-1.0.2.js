/**
 * lovely.io 'slideshow' module v1.0.2
 *
 * Copyright (C) 2012 Nikolay Nemshilov
 */
Lovely("slideshow-1.0.2",["dom","ui-1.0.1"],function(a){var b=this,c={},d,Class,e,f,g,Slideshow,h,i,c,j;return i=this.Lovely.module("core"),d=this.Lovely.module("dom"),h=this.Lovely.module("ui-1.0.1"),j=i.ext,Class=i.Class,g=i.Options,e=d.Element,f=h.Icon,Slideshow=new Class(e,{include:g,extend:{Options:{fxDuration:"normal",showPager:!0,autoplay:!1,delay:4e3,loop:!0}},currentIndex:null,constructor:function Slideshow(a,b){var c=this;return this.$super(a._).setOptions(this.data("slideshow")),this.controls=(new e("div",{"class":"lui-slideshow-controls"})).append(this.prev_button=(new f({"class":"lui-icon-previous"})).on("click",function(){return c.previous()}),this.next_button=(new f({"class":"lui-icon-next"})).on("click",function(){return c.next()}),this.pager=new e("div",{"class":"lui-slideshow-pager"})),typeof window.ontouchstart!="undefined"&&(this.prev_button.remove(),this.next_button.remove()),this.pager.delegate("a",{click:function(a){return a.stop(),c.slideTo(a.target.data("index"))}}),this.options.showPager||this.pager.remove(),this.on({mouseenter:function(){return c.__hovering=!!c._timer,c.pause()},mouseleave:function(){return c.__hovering&&c.play(),c.__hovering=!1},touchstart:function(a){return c.__touchstart=a.position().x},touchmove:function(a){var b,d;if(c.__sliding)return;d=a.position().x,b=20;if(d-c.__touchstart>b)return c.previous(),c.__touchstart=d;if(c.__touchstart-d>b)return c.next(),c.__touchstart=d}}),this.append(this.controls).slideTo(0),this.options.autoplay&&this.play(),this},items:function(){var a=this;return this.children().reject(function(b){return b===a.controls})},hasPrevious:function(){return this.currentIndex>0},hasNext:function(){return this.currentIndex<this.items().length-1},previous:function(){return this.slideTo(this.currentIndex-1)},next:function(){return this.slideTo(this.currentIndex+1)},slideTo:function(a){var b;if(this.__sliding)return;this.__sliding=!0,b=this.items(),a!==this.currentIndex&&this.currentIndex!==null&&b[a]&&this.currentItem?this._slide(a,b[a],this.currentItem):this.__sliding=!1;if(b[a]||this.currentIndex===null)this.currentIndex=a,this.currentItem=b[a];return this.prev_button[this.hasPrevious()?"removeClass":"addClass"]("lui-disabled"),this.next_button[this.hasNext()?"removeClass":"addClass"]("lui-disabled"),this._rebuild_pager()},play:function(){var a=this;return this._timer||(this._timer=window.setInterval(function(){if(a.hasNext())return a.next();if(a.options.loop)return a.slideTo(0)},this.options.delay)),this},pause:function(){return this._timer&&(b.clearInterval(this._timer),delete this._timer),this},_slide:function(a,c,d){var e,f,g,h,i=this;return e=this._end_size(c),h=d.size(),g=e.item_size,e=e.list_size,f=h.x>g.x?h.x:g.x,this.currentIndex>a&&(f*=-1),this.addClass("lui-slideshow-resizing").size(this.size()),d.size(h).style({position:"absolute",left:"0px"}),c.style({display:"block",position:"absolute",left:f+"px"}),c.size(g).animate({left:"0px"},{duration:this.options.fxDuration,finish:function(){return c.style({position:"relative",width:"",height:""})}}),d.animate({left:-f+"px"},{duration:this.options.fxDuration,finish:function(){return d.style({display:"none",width:"",height:""})}}),this.animate(e,{duration:this.options.fxDuration,finish:function(){return i.removeClass("lui-slideshow-resizing"),b.setTimeout(function(){return i.__sliding=!1},50)}})},_end_size:function(a){var b;return this.__clone||(this.__clone=this.clone().style({visibility:"hidden"}).insertTo(this,"after")),this.__clone.style({display:""}),a=a.clone().style({display:"block",position:"relative"}),b={list_size:this.__clone.update(a).style("width,height"),item_size:a.size()},this.__clone.style({display:"none"}),b},_rebuild_pager:function(){var a,b,c,d;return b=function(){var b,e,f;e=this.items(),f=[];for(c=0,b=e.length;c<b;c++)d=e[c],a=c===this.currentIndex?' class="lui-slideshow-pager-current"':"",f.push('<a href="" data-index="'+c+'"'+a+">&bull;</a>");return f}.call(this),this.pager.html(b.join(""))}}),c=j(Slideshow,{version:"1.0.2"}),d(function(){return d(".lui-slideshow").forEach(function(a){if(!(a instanceof Slideshow))return new Slideshow(a)})}),function(a){var b=a.createElement("style"),c=a.createTextNode("*.lui-slideshow{position:relative;display:inline-block;background:none;border:none;list-style:none;padding:0} *.lui-slideshow>li{margin:0;padding:0;list-style:none;display:none;position:relative;top:0px;left:0px} *.lui-slideshow>li:first-child{display:block} *.lui-slideshow>div.lui-slideshow-controls{position:absolute;left:0;bottom:0;width:100%;text-align:center} *.lui-slideshow>div.lui-slideshow-controls .lui-icon{position:absolute;bottom:0.6em;right:0.5em;top:auto;font-size:200%;font-weight:bold;border:none;cursor:pointer;background:rgba(255,255,255,0.50);border:0.15em solid rgba(0,0,0,0.50);opacity:0;-webkit-transition:opacity 200ms;-moz-transition:opacity 200ms;-ms-transition:opacity 200ms;-o-transition:opacity 200ms;transition:opacity 200ms} *.lui-slideshow>div.lui-slideshow-controls .lui-icon:active{top:auto} *.lui-slideshow>div.lui-slideshow-controls .lui-icon:first-child{left:0.5em} *.lui-slideshow>div.lui-slideshow-controls .lui-slideshow-pager{position:relative;bottom:0.6em;display:inline-block;opacity:0;-webkit-transition:opacity 200ms;-moz-transition:opacity 200ms;-ms-transition:opacity 200ms;-o-transition:opacity 200ms;transition:opacity 200ms} *.lui-slideshow>div.lui-slideshow-controls .lui-slideshow-pager a, *.lui-slideshow>div.lui-slideshow-controls .lui-slideshow-pager a:hover{text-decoration:none;font-size:200%;font-weight:bold;color:#ccc;opacity:0.5} *.lui-slideshow>div.lui-slideshow-controls .lui-slideshow-pager a.lui-slideshow-pager-current, *.lui-slideshow>div.lui-slideshow-controls .lui-slideshow-pager a:hover.lui-slideshow-pager-current{color:#ddd;opacity:0.9} *.lui-slideshow:hover>div.lui-slideshow-controls .lui-icon{opacity:0.7} *.lui-slideshow:hover>div.lui-slideshow-controls .lui-icon:hover{opacity:1} *.lui-slideshow:hover>div.lui-slideshow-controls .lui-icon.lui-disabled{opacity:0;cursor:default} *.lui-slideshow:hover>div.lui-slideshow-controls div.lui-slideshow-pager{opacity:1} *.lui-slideshow.lui-slideshow-resizing{overflow:hidden}");b.type="text/css",a.getElementsByTagName("head")[0].appendChild(b),b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c)}(this.document),c})